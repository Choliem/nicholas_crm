<!DOCTYPE html>
<html>
  <head>
    <title>Nicholas CRM - PT. Smart</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <script src="https://cdn.tailwindcss.com"></script> </head>

<body class="flex bg-gray-100 min-h-screen">
  <aside class="w-64 bg-blue-900 text-white flex-shrink-0">
    <div class="p-6 text-2xl font-bold border-b border-blue-800">
      PT. SMART <span class="text-red-500">CRM</span>
    </div>
    <nav class="mt-6 px-4 space-y-2">
      <%= link_to "Dashboard", root_path, class: "block py-2.5 px-4 rounded hover:bg-blue-800 transition" %>
      <%= link_to "Leads (Prospek)", leads_path, class: "block py-2.5 px-4 rounded hover:bg-blue-800 transition" %>
      
      <% if current_user&.role == 'manager' %>
        <div class="pt-4 pb-2 text-xs font-semibold text-blue-400 uppercase">Management</div>
        <%= link_to "Approval Projects", projects_path, class: "block py-2.5 px-4 rounded hover:bg-blue-800 transition" %>
        <%= link_to "Daftar Produk", products_path, class: "block py-2.5 px-4 rounded hover:bg-blue-800 transition" %>
      <% end %>
      
      <div class="mt-10 border-t border-blue-800 pt-4">
        <p class="px-4 text-xs text-blue-300">Logged in as: <%= current_user&.name %></p>
        <%= button_to "Logout", logout_path, method: :delete, class: "w-full text-left py-2.5 px-4 rounded hover:bg-red-700 text-red-300 transition" %>
      </div>
    </nav>
  </aside>

  <main class="flex-1 p-8">
    <% flash.each do |type, msg| %>
      <div class="mb-6 p-4 rounded-lg shadow-md <%= type == 'notice' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800' %>">
        <%= msg %>
      </div>
    <% end %>

    <%= yield %>
  </main>
</body>
</html>