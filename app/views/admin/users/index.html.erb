<div class="mb-6 flex justify-between items-center">
  <div>
    <h1 class="text-2xl font-bold text-slate-800">User Management</h1>
    <p class="text-slate-500">Manage user roles and access.</p>
  </div>
</div>

<div class="overflow-x-auto bg-white rounded-xl shadow-sm border border-slate-100">
  <table class="min-w-full">
    <thead class="bg-slate-50">
      <tr class="text-xs font-bold text-slate-500 uppercase tracking-wider text-left">
        <th class="px-6 py-4">User Info</th>
        <th class="px-6 py-4">Role</th>
        <th class="px-6 py-4">Status</th>
        <th class="px-6 py-4">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-slate-100">
      <% @users.each do |user| %>
        <tr class="hover:bg-slate-50 transition">
          <td class="px-6 py-4">
            <div class="font-bold text-slate-800"><%= user.name %></div>
            <div class="text-xs text-slate-400"><%= user.email %></div>
            <div class="text-xs text-slate-400 font-mono tracking-tighter">@<%= user.username %></div>
          </td>
          <td class="px-6 py-4">
            <%= form_with(model: user, url: admin_user_path(user), method: :patch, class: "flex items-center gap-2") do |f| %>
              <%= f.select :role, [['Staff', 'staff'], ['Manager', 'manager'], ['Sales', 'sales'], ['Admin', 'admin']], {}, class: "text-xs border-slate-200 rounded-lg py-1 px-2 focus:ring-blue-500" %>
              <%= f.submit "Update", class: "bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold hover:bg-blue-700 cursor-pointer" %>
            <% end %>
          </td>
          <td class="px-6 py-4">
            <% if user.banned? %>
              <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold">BANNED</span>
              <div class="text-[10px] text-red-500 mt-1 max-w-[150px] truncate"><%= user.ban_reason %></div>
            <% else %>
              <span class="bg-emerald-100 text-emerald-700 px-2 py-1 rounded text-xs font-bold">ACTIVE</span>
            <% end %>
          </td>
          <td class="px-6 py-4">
             <%= form_with(model: user, url: admin_user_path(user), method: :patch) do |f| %>
              <% if user.banned? %>
                <%= f.hidden_field :banned, value: false %>
                <%= f.hidden_field :ban_reason, value: nil %>
                <%= f.submit "Unban", class: "text-emerald-600 hover:text-emerald-800 text-xs font-bold cursor-pointer" %>
              <% else %>
                <%= f.hidden_field :banned, value: true %>
                <div class="flex gap-2">
                   <%= f.text_field :ban_reason, placeholder: "Reason...", class: "text-xs border-slate-200 rounded w-24 px-2" %>
                   <%= f.submit "Ban", class: "text-red-600 hover:text-red-800 text-xs font-bold cursor-pointer" %>
                </div>
              <% end %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
